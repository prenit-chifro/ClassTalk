<div class="new-class-step-2-form-div">
	<%= form_tag institute_grades_path(@institute), method: :post, multipart: true, remote: true, id: "grades-sections-details-form" do %>
		<%= hidden_field_tag :step, 2 %>

		<% if(!@grade_section_models.blank?) %>
			<div id="myCarousel" class="carousel slide" data-ride="carousel">
			  <!-- Indicators -->
			  
			  <ol class="carousel-indicators">
			  	<% @grade_section_models.each_with_index do |grade_section_model, i| %>
			  		<% if(i==0) %>
			  			<li data-target="#myCarousel" data-slide-to="<%= i %>" class="active"></li>
			  		<% else %>
			  			<li data-target="#myCarousel" data-slide-to="<%= i %>"></li>
			  		<% end %>
			  		<% if(i==@grade_section_models.length-1) %>
			  			<li data-target="#myCarousel" data-slide-to="<%= i + 1 %>"></li>
			  		<% end %>
				<% end %>
					  
			  </ol>
				
			  <!-- Wrapper for slides -->
			  <div class="carousel-inner" role="listbox">
			    <% i=0 %>
			  	<% @grade_section_models.each_with_index do |grade_section_model, i| %>
			  		<% grade = grade_section_model.grade %>
					<% section = grade_section_model.section %>
			  		<% if(i==0) %>
			  			<div class="item active">
			  		<% else %>
		  				<div class="item">
				  	<% end %>
							<% if(!@teachers.blank?) %>
					    		<h1> Select ClassTeacher of Class <%= grade.grade_name %><%= section.section_name %> </h1>		
								<% options = [["Select ClassTeacher", ""]] %>	
								<% default_option = ["Select ClassTeacher", ""] %>
								<% @teachers.each do |teacher| %>
									<% options << [teacher.first_name + " " + teacher.last_name, teacher.id] %>
								<% end %>
								<%= select_tag "grade_ids[#{grade.id}][section_ids][#{section.id}][classteacher_id]", options_for_select(options, default_option) %>
							<% end %>

							<% if(!@subjects.blank?) %>
								<h1> Add Subjects in Class <%= grade.grade_name %><%= section.section_name %> </h1>
								<% @subjects.each do |subject| %>
									<%= subject.subject_name %> <%= check_box_tag "grade_ids[#{grade.id}][section_ids][#{section.id}][subject_ids][#{subject.id}][subject_id]", subject.id, false %>

									<% if(!@teachers.blank?) %>
							    		<h1> Select Subject Teacher of <%= subject.subject_name %>, Class <%= grade.grade_name %><%= section.section_name %> </h1>		
										<% options = [["Select SubjectTeacher", ""]] %>	
										<% default_option = ["Select SubjectTeacher", ""] %>
										<% @teachers.each do |teacher| %>
											<% options << [teacher.first_name + " " + teacher.last_name, teacher.id] %>
										<% end %>
										<%= select_tag "grade_ids[#{grade.id}][section_ids][#{section.id}][subject_ids][#{subject.id}][subject_teacher_id]", options_for_select(options, default_option) %>
									<% end %>	
								<% end %>
								
							<% end %>
						</div>	
					 
			  	<% end %>
			  	<div class="item">
					<%= submit_tag :Save, "data-disable-with" => "Saving..." %>	
				</div>		

			  </div>

			  <!-- Left and right controls -->
			  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
			    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
			    <span class="sr-only">Previous</span>
			  </a>
			  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
			    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
			    <span class="sr-only">Next</span>
			  </a>
			</div>
			
		<% end %>	
	<% end %>
</div>

